# NEVR Agent Configuration File
# This file can be used to configure the agent application
# Command-line flags will override values in this file
# Environment variables with the NEVR_ prefix will override config values

# Global configuration
debug: false
log_level: info
log_file: ""

# Agent configuration
agent:
  frequency: 10
  format: nevrcap,stream
  output_directory: ./output
  
  # JWT token for authenticating with the events/stream API
  jwt_token: ""
  
  # Frame filtering options
  all_frames: false           # Send all frames, not just event frames
  fps: 0                      # Target FPS (0 = use polling frequency)
  idle_fps: 1                 # FPS for non-gametime frames
  exclude_bones: false        # Exclude player bone data
  active_only: false          # Only stream during active gameplay
  exclude_paused: false       # Exclude paused frames (with active_only)
  include_modes: []           # Only stream these game modes
  exclude_modes: []           # Exclude these game modes
  
  # Stream configuration (optional)
  stream_enabled: false
  stream_http_url: https://g.echovrce.com:7350
  stream_socket_url: wss://echovrce.com/v3/lobby-session-events
  stream_http_key: ""
  stream_server_key: ""
  stream_username: ""
  stream_password: ""
  
  # Events API configuration (optional)
  events_enabled: false
  events_url: http://localhost:8081
  events_user_id: ""
  events_node_id: default-node

# API Server configuration
apiserver:
  server_address: ":8081"
  mongo_uri: mongodb://localhost:27017
  jwt_secret: "your-secret-key-here-change-this-in-production"
  max_stream_hz: 60
  
  # AMQP/RabbitMQ configuration (for publishing match events)
  amqp_enabled: false
  amqp_uri: "amqp://guest:guest@localhost:5672/"
  amqp_queue_name: "match.events"
  
  # Capture storage configuration
  capture_dir: "./captures"
  capture_retention: "168h"      # 7 days
  capture_max_size: 10737418240  # 10GB in bytes
  
  # CORS configuration
  cors_origins: "*"             # Comma-separated list of allowed origins
  
  # Metrics configuration (leave empty to disable)
  metrics_addr: ""              # e.g., ":9090" to enable Prometheus metrics

# Converter configuration
converter:
  input_file: ""
  output_file: ""
  output_dir: ./
  format: auto
  verbose: false
  overwrite: false
  progress: false               # Show progress bar during conversion

# Replayer configuration
replayer:
  bind_address: "127.0.0.1:6721"
  loop: false
  files: []
